{
    "Format": "2.0.0",
    "Changes": [
        {
            "LogName": "Load Assets",
            "Action": "Load",
            "Target": "Mods/JavCombita/ELE/Analyzer",
            "FromFile": "assets/soil_analyzer.png"
        },
        {
            "Action": "Load",
            "Target": "Mods/JavCombita/ELE/Shelter",
            "FromFile": "assets/ladybug_shelter.png"
        },
        {
            "LogName": "Define Items",
            "Action": "EditData",
            "Target": "Data/Objects",
            "Entries": {
                "JavCombita.ELE_SoilAnalyzer": {
                    "Name": "Soil Analyzer",
                    "DisplayName": "{{i18n:item.analyzer.name}}",
                    "Description": "{{i18n:item.analyzer.description}}",
                    "Type": "Basic",
                    "Category": -99,
                    "Price": 500,
                    "Texture": "Mods/JavCombita/ELE/Analyzer", 
                    "SpriteIndex": 0,
                    "ContextTags": ["not_giftable", "color_yellow"]
                },
                "JavCombita.ELE_LadybugShelter": {
                    "Name": "Ladybug Shelter",
                    "DisplayName": "{{i18n:item.shelter.name}}",
                    "Description": "{{i18n:item.shelter.description}}",
                    "Type": "Crafting",
                    "Category": -24, 
                    "Price": 1000,
                    "Texture": "Mods/JavCombita/ELE/Shelter", 
                    "SpriteIndex": 0, 
                    "ContextTags": ["not_giftable"]
                }
            }
        },
        {
            "LogName": "Add Analyzer to Pierre",
            "Action": "EditData",
            "Target": "Data/Shops",
            "TargetField": ["SeedShop", "Items"],
            "Entries": {
                "JavCombita.ELE_SoilAnalyzer": {
                    "Id": "JavCombita.ELE_SoilAnalyzer",
                    "ItemId": "JavCombita.ELE_SoilAnalyzer",
                    "Price": 2000,
                    "IgnoreShopPriceModifiers": true
                }
            }
        },
        {
            "LogName": "Define Crafting Recipe",
            "Action": "EditData",
            "Target": "Data/CraftingRecipes",
            "Entries": {
                "Ladybug Shelter": "388 50 709 10/Home/JavCombita.ELE_LadybugShelter/true/null"
            }
        },
        
        // --- NUEVO SISTEMA DE DESBLOQUEO ---

        // 1. Definir el contenido de la carta
        {
            "LogName": "Add Mail Content",
            "Action": "EditData",
            "Target": "Data/mail",
            "Entries": {
                "JavCombita.ELE_RobinShelterMail": "{{i18n:mail.robin_shelter.body}}"
            }
        },

        // 2. Crear la l√≥gica para enviar la carta (Trigger)
        {
            "LogName": "Logic: Send Mail on Level 3 + Robin 4 Hearts",
            "Action": "EditData",
            "Target": "Data/TriggerActions",
            "Entries": {
                "JavCombita.ELE_UnlockShelter": {
                    "Id": "JavCombita.ELE_UnlockShelter",
                    "Trigger": "DayStarted",
                    "Condition": "PLAYER_FARMING_LEVEL Current 3, RELATIONSHIP_POINTS Robin 1000, !PLAYER_HAS_MAIL Current JavCombita.ELE_RobinShelterMail",
                    "Actions": ["AddMail Current JavCombita.ELE_RobinShelterMail"]
                }
            }
        },

        // 3. Vender la receta SOLO si tiene la carta
        {
            "LogName": "Add Recipe to Robin (Conditional)",
            "Action": "EditData",
            "Target": "Data/Shops",
            "TargetField": ["Carpenter", "Items"],
            "Entries": {
                "JavCombita.ELE_LadybugShelter_Recipe": {
                    "Id": "JavCombita.ELE_LadybugShelter_Recipe",
                    "ItemId": "JavCombita.ELE_LadybugShelter", 
                    "IsRecipe": true, 
                    "Price": 3000,
                    "AvailableCondition": "PLAYER_HAS_MAIL JavCombita.ELE_RobinShelterMail" 
                }
            }
        }
    ]
}