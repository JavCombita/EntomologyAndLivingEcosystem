{
    "Format": "2.8.0",
    "Changes": [
        {
            "LogName": "Load Assets",
            "Action": "Load",
            "Target": "Mods/JavCombita/ELE/Analyzer",
            "FromFile": "assets/soil_analyzer.png"
        },
        {
            "Action": "Load",
            "Target": "Mods/JavCombita/ELE/Shelter",
            "FromFile": "assets/ladybug_shelter.png"
        },
        {
            "LogName": "Define Items",
            "Action": "EditData",
            "Target": "Data/Objects",
            "Entries": {
                "JavCombita.ELE_SoilAnalyzer": {
                    "Name": "Soil Analyzer",
                    "DisplayName": "{{i18n:item.analyzer.name}}",
                    "Description": "{{i18n:item.analyzer.description}}",
                    "Type": "Basic",
                    "Category": -99,
                    "Price": 500,
                    "Texture": "Mods/JavCombita/ELE/Analyzer", 
                    "SpriteIndex": 0,
                    "ContextTags": ["not_giftable", "color_yellow"]
                },
                "JavCombita.ELE_LadybugShelter": {
                    "Name": "Ladybug Shelter",
                    "DisplayName": "{{i18n:item.shelter.name}}",
                    "Description": "{{i18n:item.shelter.description}}",
                    "Type": "BigCraftable",
                    "Category": -9,
                    "Price": 1000,
                    "Texture": "Mods/JavCombita/ELE/Shelter", 
                    "SpriteIndex": 0, 
                    "Fragility": 0,
                    "ContextTags": ["not_giftable"]
                }
            }
        },
        {
            "LogName": "Add Analyzer to Pierre",
            "Action": "EditData",
            "Target": "Data/Shops",
            "TargetField": ["SeedShop", "Items"],
            "Entries": {
                "JavCombita.ELE_SoilAnalyzer": {
                    "Id": "JavCombita.ELE_SoilAnalyzer",
                    "ItemId": "JavCombita.ELE_SoilAnalyzer",
                    "Price": 2000,
                    "IgnoreShopPriceModifiers": true
                }
            }
        },
        {
            "LogName": "Define Crafting Recipe",
            "Action": "EditData",
            "Target": "Data/CraftingRecipes",
            "Entries": {
                "Ladybug Shelter": "388 70 709 30/Home/JavCombita.ELE_LadybugShelter/false/null"
            }
        },
        
        // --- SISTEMA DE CARTA Y TIENDA ---
        {
            "LogName": "Add Mail Content",
            "Action": "EditData",
            "Target": "Data/mail",
            "Entries": {
                // CORRECCIÓN: Agregamos [#] y el título para que el juego sepa formatearlo
                "JavCombita.ELE_RobinShelterMail": "{{i18n:mail.robin_shelter.body}}[#]{{i18n:mail.robin_shelter.title}}"
            }
        },
        // NOTA: Eliminé Data/TriggerActions porque lo haremos en C#
        {
            "LogName": "Add Recipe to Robin (Conditional)",
            "Action": "EditData",
            "Target": "Data/Shops",
            "TargetField": ["Carpenter", "Items"],
            "Entries": {
                "JavCombita.ELE_LadybugShelter_Recipe": {
                    "Id": "JavCombita.ELE_LadybugShelter_Recipe",
                    "ItemId": "JavCombita.ELE_LadybugShelter", 
                    "IsRecipe": true, 
                    "Price": 3000,
                    // ESTO ES LO IMPORTANTE: Solo aparece si tienes la carta
                    "AvailableCondition": "PLAYER_HAS_MAIL JavCombita.ELE_RobinShelterMail" 
                }
            }
        }
    ]
}
